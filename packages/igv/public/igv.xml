<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE visualization SYSTEM "../../visualization.dtd">
<visualization name="IGV" embeddable="true">
    <description>Interactive Genome Visualization</description>
    <data_sources>
        <data_source>
            <model_class>HistoryDatasetAssociation</model_class>
            <test test_attr="ext">bam</test>
            <test test_attr="ext">bcf</test>
            <test test_attr="ext">bed</test>
            <test test_attr="ext">bedgraph</test>
            <test test_attr="ext">bigbed</test>
            <test test_attr="ext">bigwig</test>
            <test test_attr="ext">cram</test>
            <test test_attr="ext">fasta</test>
            <test test_attr="ext">gff</test>
            <test test_attr="ext">gff3</test>
            <test test_attr="ext">gtf</test>
            <test test_attr="ext">twobit</test>
            <test test_attr="ext">vcf</test>
            <test test_attr="ext">vcf_bgzip</test>
            <test test_attr="ext">wig</test>
        </data_source>
    </data_sources>
    <params>
        <param required="true">dataset_id</param>
    </params>
    <entry_point entry_point_type="script" src="index.js" css="index.css" />
    <settings>
        <input>
            <label>Source</label>
            <help>Switch to genomes provided IGV</help>
            <name>source</name>
            <type>conditional</type>
            <test_param>
                <name>source_flag</name>
                <type>boolean</type>
                <value>false</value>
            </test_param>
            <cases>
                <cases>
                    <value>false</value>
                    <inputs>
                        <inputs>
                            <label>Genome</label>
                            <help>Select a reference genome</help>
                            <name>genome</name>
                            <type>data_table</type>
                            <tables>
                                <tables>fasta_indexes</tables>
                                <tables>remote_indexes</tables>
                                <tables>twobit</tables>
                            </tables>
                        </inputs>
                    </inputs>
                </cases>
                <cases>
                    <value>true</value>
                    <inputs>
                        <inputs>
                            <label>Genome</label>
                            <help>Select a reference genome provided by IGV</help>
                            <name>genome</name>
                            <type>data_json</type>
                            <url>https://s3.amazonaws.com/igv.org.genomes/genomes.json</url>
                    </inputs>
                </cases>
            </cases>
        </input>
        <input>
            <label>Locus</label>
            <help>Select a gene locus e.g. chr1:1-100</help>
            <name>locus</name>
            <type>text</type>
            <value>all</value>
        </input>
    </settings>
    <tracks>
        <input>
            <label>Name</label>
            <help>Specify a name</help>
            <name>name</name>
            <type>text</type>
            <value>Track</value>
        </input>
        <input>
            <label>Dataset</label>
            <help>Specify a dataset</help>
            <name>urlDataset</name>
            <type>data</type>
        </input>
        <input>
            <label>Index</label>
            <help>Specify an index</help>
            <name>indexUrlDataset</name>
            <type>data</type>
            <optional>true</optional>
        </input>
        <input>
            <label>Type</label>
            <help>Select the track type (only if not auto-detected from file format)</help>
            <name>type</name>
            <type>select</type>
            <value>auto</value>
            <data>
                <data><label>Auto</label><value>auto</value></data>
                <data><label>Annotation</label><value>annotation</value></data>
                <data><label>Copy Number Variation (CNV)</label><value>cnv</value></data>
                <data><label>SNP</label><value>snp</value></data>
                <data><label>GA4GH</label><value>ga4gh</value></data>
            </data>
        </input>
        <input>
            <label>Mode</label>
            <help>Select a display mode</help>
            <name>displayMode</name>
            <type>select</type>
            <value>EXPANDED</value>
            <data>
                <data><label>Collapsed</label><value>COLLAPSED</value></data>
                <data><label>Squished</label><value>SQUISHED</value></data>
                <data><label>Expanded</label><value>EXPANDED</value></data>
            </data>
        </input>
        <input>
            <label>Color</label>
            <help>Pick a color</help>
            <name>color</name>
            <type>color</type>
        </input>
    </tracks>
</visualization>